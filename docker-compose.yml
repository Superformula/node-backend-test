version: '2.4'

services:
  mongo:
    image: mongo:4.0.1
    ports:
      - '27017'
    # /host for ad-hoc transfers in/out of container
    # /data for DB data itself
    volumes:
      - './data/host:/host'
      - './data/mongo:/data'

  hapi:
    build: .
    command: node --inspect=[::]:9229 code/main.js
    restart: always
    ports:
      - '3000:3000'
      - '9229:9229'
    volumes:
      - .:/app
    links:
      - mongo
